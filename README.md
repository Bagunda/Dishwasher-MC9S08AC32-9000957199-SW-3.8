# Dishwasher-MC9S08AC32-9000957199-SW-3.8
Инструкция по перепрошивке микроконтроллера MC9S08AC32CFGE на плате 9000957199 SW 3.8 для посудомойки NEFF S58E40X0RU/19 (и для Bosh) 

Посудомойка:
- NEFF S58E40X0RU/19, Type SD4P1F. Вроде бы оно же от фирмы Bosh существует.
- Плата: procond elettronica 3560171029.
- Проц MC9S08AC32 CFGE.
- 9000957199 SW 3.8
- SN AGSL 14570672

Вот фотки платы и посудомоечной машины, для которой эта прошивка успешно запустилась: https://photos.app.goo.gl/ReTBPjdU9Q1RRbAa7

Я нечаянно дотронулся до корпуса посудомойки и платы индикации и микроконтроллер сгорел. Измерение сопротивления показывало 10 Ом, что значит, что он в коротком замыкании (КЗ).

Инструкция:
Я купил микроконтроллер на али в декабре 2023 по этой ссылке: https://aliexpress.ru/item/1005002033301013.html
Все файлы можно найти здесь: https://drive.google.com/drive/folders/107ZJk55Qnq7-cprJA8hOGbPUfBigPqva

1. Устанавливаем USBDM_Drivers_4_12_3_Win_x64.msi, потом USBDM_4_12_1_295_Win.msi. На Windows 11 у меня успешно всё произошло.
2. Подсоединяем USBDM программатор к USB компьютера.
3. Запускаем программу `HCS08 Programmer`.
4. На вкладке `Interface` смотрим, что вместо `[No device Found]` должен быть наш программатор. У меня в этом поле написано `USBDM-JS16-0001`. На этой страничке у меня написано, что это программное обеспечение `BDM Firmware Ver 4.12.1`, `DLL Ver 4.12.1.295`.
5. Если в `Select BDM` нету нашего программатора, то нажимаем кнопку `Detect`.
6. На вкладке `Target` нажимаем кнопку `Load Hex File` и выбираем файл прошивки `9000957199_SW_3.8_SPV30E40RU_32_9605_8000-ffff.s19`.
7. Открываем корпус программатора и изучаем клеммные штырьки J3 с джампером.
8. Если не подавать питания на эту плату, то джампер выставляем в положение 5V, т.к. на плате всё работает по 5 вольтам. И вся плата будет питаться от этого программатора. Она потребляет мало, так что можно подключать... всё выдержит... Предварительно измерьте сопротивление между GND и VCC на плате. На стабилизатор 78M05 приходит около 30В и он понижает их до 5В. Посмотрите по даташиту какие ноги отвечают за вход, выход, GND. И измерьте сопротивление между GND (2 и 4) и OUT (3). Сопротивление должно быть больше 5-10 кОм. У меня здесь было КЗ. Поэтому я менял микроконтроллер MC9S08AC32CFGE.
9. Если на плату подаётся питание (например от самой посудомойки или от внешнего блока питания), то джампер надо выставить в положение TVDT-TVDT.
10. Джампер в положение 3.3В нас не интересует для этой платы.
11. Потом прозваниваете пищалкой мультиметра на отключенном USBDM на какой провод какой из контактов уходит (VCC, RST, GND, BKGD) и помечаете их для себя.
12. Потом ищите даташит на микросхему MC9S08AC32CFGE и смотрите на каких ногах есть контакт BKGD и RESET. К этим ногам и надо будет подключить программатор.
13. GND и VCC от программатора можно подключить к кренке (стабилизатору) 78M05, если плата будет запитываться только от программатора.
14. На фотографии https://photos.app.goo.gl/ExXA5b2tXuSU77iw7 я указал как я подключал программатор к плате. Можете довериться и также подключить.
15. Потом втыкаем программатор в компьютер.
16. В программе `HCS08 Programmer` на вкладке `Target` нажимаем `Detect Chip`. И если программа не выдала ошибку, а в поле `Device Selection` что-то изменилось - это успех! Значит микросхема уже считывается. На форумах пишут, что в этом поле не всегда корректо подставляется значение. Поэтому перепроверьте, что выбрана микросхема именно MC9S08AC32.
17. У меня программа успешно прошила без активации галочки `Do trim`.
18. `Security` должно быть выставленно в `Image`.
19. `Programming Erase Mode` должно быть выставленно в `EraseMass`.
20. Нажимаем `Program Flash` и должна пойти прошивка микроконтроллера.
21. Если выдаст ошибку, то проверьте еще раз инструкцию, потом ищем в поисковике так: вводим `USBDM описание_ошибки`. И читаем что может быть не так.

Благодарность прошу переводить на Российский номер карты: 2200700864167001

https://vk.com/Bagunda, https://t.me/Bagunda
